{"ast":null,"code":"import { __assign, __spreadArrays } from \"tslib\";\nexport var ONE_SECOND = 1000;\nexport var ONE_MINUTE = 60 * ONE_SECOND;\nexport var ONE_HOUR = 60 * ONE_MINUTE;\nexport var ONE_KILO_BYTE = 1024;\nexport var DOM_EVENT;\n\n(function (DOM_EVENT) {\n  DOM_EVENT[\"BEFORE_UNLOAD\"] = \"beforeunload\";\n  DOM_EVENT[\"CLICK\"] = \"click\";\n  DOM_EVENT[\"KEY_DOWN\"] = \"keydown\";\n  DOM_EVENT[\"LOAD\"] = \"load\";\n  DOM_EVENT[\"POP_STATE\"] = \"popstate\";\n  DOM_EVENT[\"SCROLL\"] = \"scroll\";\n  DOM_EVENT[\"TOUCH_START\"] = \"touchstart\";\n  DOM_EVENT[\"VISIBILITY_CHANGE\"] = \"visibilitychange\";\n})(DOM_EVENT || (DOM_EVENT = {}));\n\nexport var ResourceKind;\n\n(function (ResourceKind) {\n  ResourceKind[\"DOCUMENT\"] = \"document\";\n  ResourceKind[\"XHR\"] = \"xhr\";\n  ResourceKind[\"BEACON\"] = \"beacon\";\n  ResourceKind[\"FETCH\"] = \"fetch\";\n  ResourceKind[\"CSS\"] = \"css\";\n  ResourceKind[\"JS\"] = \"js\";\n  ResourceKind[\"IMAGE\"] = \"image\";\n  ResourceKind[\"FONT\"] = \"font\";\n  ResourceKind[\"MEDIA\"] = \"media\";\n  ResourceKind[\"OTHER\"] = \"other\";\n})(ResourceKind || (ResourceKind = {})); // use lodash API\n\n\nexport function throttle(fn, wait, options) {\n  var needLeadingExecution = options && options.leading !== undefined ? options.leading : true;\n  var needTrailingExecution = options && options.trailing !== undefined ? options.trailing : true;\n  var inWaitPeriod = false;\n  var hasPendingExecution = false;\n  var pendingTimeoutId;\n  var isStopped = false;\n  return {\n    throttled: function () {\n      var _this = this;\n\n      if (isStopped) {\n        return;\n      }\n\n      if (inWaitPeriod) {\n        hasPendingExecution = true;\n        return;\n      }\n\n      if (needLeadingExecution) {\n        fn.apply(this);\n      } else {\n        hasPendingExecution = true;\n      }\n\n      inWaitPeriod = true;\n      pendingTimeoutId = window.setTimeout(function () {\n        if (needTrailingExecution && hasPendingExecution) {\n          fn.apply(_this);\n        }\n\n        inWaitPeriod = false;\n        hasPendingExecution = false;\n      }, wait);\n    },\n    stop: function () {\n      window.clearTimeout(pendingTimeoutId);\n      isStopped = true;\n    }\n  };\n}\n\nvar isContextArray = function (value) {\n  return Array.isArray(value);\n};\n\nvar isContext = function (value) {\n  return !Array.isArray(value) && typeof value === 'object';\n};\n/**\n * Performs a deep merge of objects and arrays\n * - arrays values are merged index by index\n * - objects are merged by keys\n * - values get replaced, unless undefined\n *\n * ⚠️ this method does not prevent infinite loops while merging circular references ⚠️\n *\n */\n\n\nexport function deepMerge(destination) {\n  var toMerge = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    toMerge[_i - 1] = arguments[_i];\n  }\n\n  return toMerge.reduce(function (value1, value2) {\n    if (isContextArray(value1) && isContextArray(value2)) {\n      return __spreadArrays(Array(Math.max(value1.length, value2.length))).map(function (_, index) {\n        return deepMerge(value1[index], value2[index]);\n      });\n    }\n\n    if (isContext(value1) && isContext(value2)) {\n      return Object.keys(value2).reduce(function (merged, key) {\n        var _a;\n\n        return __assign(__assign({}, merged), (_a = {}, _a[key] = deepMerge(value1[key], value2[key]), _a));\n      }, value1);\n    }\n\n    return value2 === undefined ? value1 : value2;\n  }, destination);\n}\nexport function assign(target) {\n  var toAssign = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    toAssign[_i - 1] = arguments[_i];\n  }\n\n  toAssign.forEach(function (source) {\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  });\n}\n/**\n * UUID v4\n * from https://gist.github.com/jed/982883\n */\n\nexport function generateUUID(placeholder) {\n  return placeholder ? // tslint:disable-next-line no-bitwise\n  (parseInt(placeholder, 10) ^ Math.random() * 16 >> parseInt(placeholder, 10) / 4).toString(16) : (1e7 + \"-\" + 1e3 + \"-\" + 4e3 + \"-\" + 8e3 + \"-\" + 1e11).replace(/[018]/g, generateUUID);\n}\n/**\n * Return true if the draw is successful\n * @param threshold between 0 and 100\n */\n\nexport function performDraw(threshold) {\n  return threshold !== 0 && Math.random() * 100 <= threshold;\n}\nexport function round(num, decimals) {\n  return +num.toFixed(decimals);\n}\nexport function msToNs(duration) {\n  return round(duration * 1e6, 0);\n}\nexport function withSnakeCaseKeys(candidate) {\n  var result = {};\n  Object.keys(candidate).forEach(function (key) {\n    result[toSnakeCase(key)] = deepSnakeCase(candidate[key]);\n  });\n  return result;\n}\nexport function deepSnakeCase(candidate) {\n  if (Array.isArray(candidate)) {\n    return candidate.map(function (value) {\n      return deepSnakeCase(value);\n    });\n  }\n\n  if (typeof candidate === 'object') {\n    return withSnakeCaseKeys(candidate);\n  }\n\n  return candidate;\n}\nexport function toSnakeCase(word) {\n  return word.replace(/[A-Z]/g, function (uppercaseLetter, index) {\n    return \"\" + (index !== 0 ? '_' : '') + uppercaseLetter.toLowerCase();\n  }).replace(/-/g, '_');\n} // tslint:disable-next-line:no-empty\n\nexport function noop() {}\n/**\n * Custom implementation of JSON.stringify that ignores value.toJSON.\n * We need to do that because some sites badly override toJSON on certain objects.\n * Note this still supposes that JSON.stringify is correct...\n */\n\nexport function jsonStringify(value, replacer, space) {\n  if (value === null || value === undefined) {\n    return JSON.stringify(value);\n  }\n\n  var originalToJSON = [false, undefined];\n\n  if (hasToJSON(value)) {\n    // We need to add a flag and not rely on the truthiness of value.toJSON\n    // because it can be set but undefined and that's actually significant.\n    originalToJSON = [true, value.toJSON];\n    delete value.toJSON;\n  }\n\n  var originalProtoToJSON = [false, undefined];\n  var prototype;\n\n  if (typeof value === 'object') {\n    prototype = Object.getPrototypeOf(value);\n\n    if (hasToJSON(prototype)) {\n      originalProtoToJSON = [true, prototype.toJSON];\n      delete prototype.toJSON;\n    }\n  }\n\n  var result;\n\n  try {\n    result = JSON.stringify(value, undefined, space);\n  } catch (_a) {\n    result = '<error: unable to serialize object>';\n  } finally {\n    if (originalToJSON[0]) {\n      ;\n      value.toJSON = originalToJSON[1];\n    }\n\n    if (originalProtoToJSON[0]) {\n      ;\n      prototype.toJSON = originalProtoToJSON[1];\n    }\n  }\n\n  return result;\n}\n\nfunction hasToJSON(value) {\n  return typeof value === 'object' && value !== null && value.hasOwnProperty('toJSON');\n}\n\nexport function includes(candidate, search) {\n  // tslint:disable-next-line: no-unsafe-any\n  return candidate.indexOf(search) !== -1;\n}\nexport function find(array, predicate) {\n  for (var i = 0; i < array.length; i += 1) {\n    var item = array[i];\n\n    if (predicate(item, i, array)) {\n      return item;\n    }\n  }\n\n  return undefined;\n}\nexport function isPercentage(value) {\n  return isNumber(value) && value >= 0 && value <= 100;\n}\nexport function isNumber(value) {\n  return typeof value === 'number';\n}\n/**\n * Get the time since the navigation was started.\n *\n * Note: this does not use `performance.timeOrigin` because it doesn't seem to reflect the actual\n * time on which the navigation has started: it may be much farther in the past, at least in Firefox 71.\n * Related issue in Firefox: https://bugzilla.mozilla.org/show_bug.cgi?id=1429926\n */\n\nexport function getRelativeTime(timestamp) {\n  return timestamp - getNavigationStart();\n}\nexport function getTimestamp(relativeTime) {\n  return Math.floor(getNavigationStart() + relativeTime);\n}\n/**\n * Navigation start slightly change on some rare cases\n */\n\nvar navigationStart;\nexport function getNavigationStart() {\n  if (navigationStart === undefined) {\n    navigationStart = performance.timing.navigationStart;\n  }\n\n  return navigationStart;\n}\nexport function objectValues(object) {\n  var values = [];\n  Object.keys(object).forEach(function (key) {\n    values.push(object[key]);\n  });\n  return values;\n}\nexport function objectEntries(object) {\n  return Object.keys(object).map(function (key) {\n    return [key, object[key]];\n  });\n}\nexport function isEmptyObject(object) {\n  return Object.keys(object).length === 0;\n}\n/**\n * inspired by https://mathiasbynens.be/notes/globalthis\n */\n\nexport function getGlobalObject() {\n  if (typeof globalThis === 'object') {\n    return globalThis;\n  }\n\n  Object.defineProperty(Object.prototype, '_dd_temp_', {\n    get: function () {\n      return this;\n    },\n    configurable: true\n  }); // @ts-ignore\n\n  var globalObject = _dd_temp_; // @ts-ignore\n\n  delete Object.prototype._dd_temp_;\n\n  if (typeof globalObject !== 'object') {\n    // on safari _dd_temp_ is available on window but not globally\n    // fallback on other browser globals check\n    if (typeof self === 'object') {\n      globalObject = self;\n    } else if (typeof window === 'object') {\n      globalObject = window;\n    } else {\n      globalObject = {};\n    }\n  }\n\n  return globalObject;\n}\nexport function getLocationOrigin() {\n  return getLinkElementOrigin(window.location);\n}\n/**\n * IE fallback\n * https://developer.mozilla.org/en-US/docs/Web/API/HTMLHyperlinkElementUtils/origin\n */\n\nexport function getLinkElementOrigin(element) {\n  if (element.origin) {\n    return element.origin;\n  }\n\n  var sanitizedHost = element.host.replace(/(:80|:443)$/, '');\n  return element.protocol + \"//\" + sanitizedHost;\n}","map":{"version":3,"sources":["../src/utils.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __assign, __spreadArrays } from \"tslib\";\nexport var ONE_SECOND = 1000;\nexport var ONE_MINUTE = 60 * ONE_SECOND;\nexport var ONE_HOUR = 60 * ONE_MINUTE;\nexport var ONE_KILO_BYTE = 1024;\nexport var DOM_EVENT;\n(function (DOM_EVENT) {\n    DOM_EVENT[\"BEFORE_UNLOAD\"] = \"beforeunload\";\n    DOM_EVENT[\"CLICK\"] = \"click\";\n    DOM_EVENT[\"KEY_DOWN\"] = \"keydown\";\n    DOM_EVENT[\"LOAD\"] = \"load\";\n    DOM_EVENT[\"POP_STATE\"] = \"popstate\";\n    DOM_EVENT[\"SCROLL\"] = \"scroll\";\n    DOM_EVENT[\"TOUCH_START\"] = \"touchstart\";\n    DOM_EVENT[\"VISIBILITY_CHANGE\"] = \"visibilitychange\";\n})(DOM_EVENT || (DOM_EVENT = {}));\nexport var ResourceKind;\n(function (ResourceKind) {\n    ResourceKind[\"DOCUMENT\"] = \"document\";\n    ResourceKind[\"XHR\"] = \"xhr\";\n    ResourceKind[\"BEACON\"] = \"beacon\";\n    ResourceKind[\"FETCH\"] = \"fetch\";\n    ResourceKind[\"CSS\"] = \"css\";\n    ResourceKind[\"JS\"] = \"js\";\n    ResourceKind[\"IMAGE\"] = \"image\";\n    ResourceKind[\"FONT\"] = \"font\";\n    ResourceKind[\"MEDIA\"] = \"media\";\n    ResourceKind[\"OTHER\"] = \"other\";\n})(ResourceKind || (ResourceKind = {}));\n// use lodash API\nexport function throttle(fn, wait, options) {\n    var needLeadingExecution = options && options.leading !== undefined ? options.leading : true;\n    var needTrailingExecution = options && options.trailing !== undefined ? options.trailing : true;\n    var inWaitPeriod = false;\n    var hasPendingExecution = false;\n    var pendingTimeoutId;\n    var isStopped = false;\n    return {\n        throttled: function () {\n            var _this = this;\n            if (isStopped) {\n                return;\n            }\n            if (inWaitPeriod) {\n                hasPendingExecution = true;\n                return;\n            }\n            if (needLeadingExecution) {\n                fn.apply(this);\n            }\n            else {\n                hasPendingExecution = true;\n            }\n            inWaitPeriod = true;\n            pendingTimeoutId = window.setTimeout(function () {\n                if (needTrailingExecution && hasPendingExecution) {\n                    fn.apply(_this);\n                }\n                inWaitPeriod = false;\n                hasPendingExecution = false;\n            }, wait);\n        },\n        stop: function () {\n            window.clearTimeout(pendingTimeoutId);\n            isStopped = true;\n        },\n    };\n}\nvar isContextArray = function (value) { return Array.isArray(value); };\nvar isContext = function (value) { return !Array.isArray(value) && typeof value === 'object'; };\n/**\n * Performs a deep merge of objects and arrays\n * - arrays values are merged index by index\n * - objects are merged by keys\n * - values get replaced, unless undefined\n *\n * ⚠️ this method does not prevent infinite loops while merging circular references ⚠️\n *\n */\nexport function deepMerge(destination) {\n    var toMerge = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        toMerge[_i - 1] = arguments[_i];\n    }\n    return toMerge.reduce(function (value1, value2) {\n        if (isContextArray(value1) && isContextArray(value2)) {\n            return __spreadArrays(Array(Math.max(value1.length, value2.length))).map(function (_, index) {\n                return deepMerge(value1[index], value2[index]);\n            });\n        }\n        if (isContext(value1) && isContext(value2)) {\n            return Object.keys(value2).reduce(function (merged, key) {\n                var _a;\n                return (__assign(__assign({}, merged), (_a = {}, _a[key] = deepMerge(value1[key], value2[key]), _a)));\n            }, value1);\n        }\n        return value2 === undefined ? value1 : value2;\n    }, destination);\n}\nexport function assign(target) {\n    var toAssign = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        toAssign[_i - 1] = arguments[_i];\n    }\n    toAssign.forEach(function (source) {\n        for (var key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n                target[key] = source[key];\n            }\n        }\n    });\n}\n/**\n * UUID v4\n * from https://gist.github.com/jed/982883\n */\nexport function generateUUID(placeholder) {\n    return placeholder\n        ? // tslint:disable-next-line no-bitwise\n            (parseInt(placeholder, 10) ^ ((Math.random() * 16) >> (parseInt(placeholder, 10) / 4))).toString(16)\n        : (1e7 + \"-\" + 1e3 + \"-\" + 4e3 + \"-\" + 8e3 + \"-\" + 1e11).replace(/[018]/g, generateUUID);\n}\n/**\n * Return true if the draw is successful\n * @param threshold between 0 and 100\n */\nexport function performDraw(threshold) {\n    return threshold !== 0 && Math.random() * 100 <= threshold;\n}\nexport function round(num, decimals) {\n    return +num.toFixed(decimals);\n}\nexport function msToNs(duration) {\n    return round(duration * 1e6, 0);\n}\nexport function withSnakeCaseKeys(candidate) {\n    var result = {};\n    Object.keys(candidate).forEach(function (key) {\n        result[toSnakeCase(key)] = deepSnakeCase(candidate[key]);\n    });\n    return result;\n}\nexport function deepSnakeCase(candidate) {\n    if (Array.isArray(candidate)) {\n        return candidate.map(function (value) { return deepSnakeCase(value); });\n    }\n    if (typeof candidate === 'object') {\n        return withSnakeCaseKeys(candidate);\n    }\n    return candidate;\n}\nexport function toSnakeCase(word) {\n    return word\n        .replace(/[A-Z]/g, function (uppercaseLetter, index) { return \"\" + (index !== 0 ? '_' : '') + uppercaseLetter.toLowerCase(); })\n        .replace(/-/g, '_');\n}\n// tslint:disable-next-line:no-empty\nexport function noop() { }\n/**\n * Custom implementation of JSON.stringify that ignores value.toJSON.\n * We need to do that because some sites badly override toJSON on certain objects.\n * Note this still supposes that JSON.stringify is correct...\n */\nexport function jsonStringify(value, replacer, space) {\n    if (value === null || value === undefined) {\n        return JSON.stringify(value);\n    }\n    var originalToJSON = [false, undefined];\n    if (hasToJSON(value)) {\n        // We need to add a flag and not rely on the truthiness of value.toJSON\n        // because it can be set but undefined and that's actually significant.\n        originalToJSON = [true, value.toJSON];\n        delete value.toJSON;\n    }\n    var originalProtoToJSON = [false, undefined];\n    var prototype;\n    if (typeof value === 'object') {\n        prototype = Object.getPrototypeOf(value);\n        if (hasToJSON(prototype)) {\n            originalProtoToJSON = [true, prototype.toJSON];\n            delete prototype.toJSON;\n        }\n    }\n    var result;\n    try {\n        result = JSON.stringify(value, undefined, space);\n    }\n    catch (_a) {\n        result = '<error: unable to serialize object>';\n    }\n    finally {\n        if (originalToJSON[0]) {\n            ;\n            value.toJSON = originalToJSON[1];\n        }\n        if (originalProtoToJSON[0]) {\n            ;\n            prototype.toJSON = originalProtoToJSON[1];\n        }\n    }\n    return result;\n}\nfunction hasToJSON(value) {\n    return typeof value === 'object' && value !== null && value.hasOwnProperty('toJSON');\n}\nexport function includes(candidate, search) {\n    // tslint:disable-next-line: no-unsafe-any\n    return candidate.indexOf(search) !== -1;\n}\nexport function find(array, predicate) {\n    for (var i = 0; i < array.length; i += 1) {\n        var item = array[i];\n        if (predicate(item, i, array)) {\n            return item;\n        }\n    }\n    return undefined;\n}\nexport function isPercentage(value) {\n    return isNumber(value) && value >= 0 && value <= 100;\n}\nexport function isNumber(value) {\n    return typeof value === 'number';\n}\n/**\n * Get the time since the navigation was started.\n *\n * Note: this does not use `performance.timeOrigin` because it doesn't seem to reflect the actual\n * time on which the navigation has started: it may be much farther in the past, at least in Firefox 71.\n * Related issue in Firefox: https://bugzilla.mozilla.org/show_bug.cgi?id=1429926\n */\nexport function getRelativeTime(timestamp) {\n    return timestamp - getNavigationStart();\n}\nexport function getTimestamp(relativeTime) {\n    return Math.floor(getNavigationStart() + relativeTime);\n}\n/**\n * Navigation start slightly change on some rare cases\n */\nvar navigationStart;\nexport function getNavigationStart() {\n    if (navigationStart === undefined) {\n        navigationStart = performance.timing.navigationStart;\n    }\n    return navigationStart;\n}\nexport function objectValues(object) {\n    var values = [];\n    Object.keys(object).forEach(function (key) {\n        values.push(object[key]);\n    });\n    return values;\n}\nexport function objectEntries(object) {\n    return Object.keys(object).map(function (key) { return [key, object[key]]; });\n}\nexport function isEmptyObject(object) {\n    return Object.keys(object).length === 0;\n}\n/**\n * inspired by https://mathiasbynens.be/notes/globalthis\n */\nexport function getGlobalObject() {\n    if (typeof globalThis === 'object') {\n        return globalThis;\n    }\n    Object.defineProperty(Object.prototype, '_dd_temp_', {\n        get: function () {\n            return this;\n        },\n        configurable: true,\n    });\n    // @ts-ignore\n    var globalObject = _dd_temp_;\n    // @ts-ignore\n    delete Object.prototype._dd_temp_;\n    if (typeof globalObject !== 'object') {\n        // on safari _dd_temp_ is available on window but not globally\n        // fallback on other browser globals check\n        if (typeof self === 'object') {\n            globalObject = self;\n        }\n        else if (typeof window === 'object') {\n            globalObject = window;\n        }\n        else {\n            globalObject = {};\n        }\n    }\n    return globalObject;\n}\nexport function getLocationOrigin() {\n    return getLinkElementOrigin(window.location);\n}\n/**\n * IE fallback\n * https://developer.mozilla.org/en-US/docs/Web/API/HTMLHyperlinkElementUtils/origin\n */\nexport function getLinkElementOrigin(element) {\n    if (element.origin) {\n        return element.origin;\n    }\n    var sanitizedHost = element.host.replace(/(:80|:443)$/, '');\n    return element.protocol + \"//\" + sanitizedHost;\n}\n//# sourceMappingURL=utils.js.map"]},"metadata":{},"sourceType":"module"}