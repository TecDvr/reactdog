{"ast":null,"code":"export var COOKIE_ACCESS_DELAY = 1000;\nexport function cacheCookieAccess(name) {\n  var timeout;\n  var cache;\n  var hasCache = false;\n\n  var cacheAccess = function () {\n    hasCache = true;\n    window.clearTimeout(timeout);\n    timeout = window.setTimeout(function () {\n      hasCache = false;\n    }, COOKIE_ACCESS_DELAY);\n  };\n\n  return {\n    get: function () {\n      if (hasCache) {\n        return cache;\n      }\n\n      cache = getCookie(name);\n      cacheAccess();\n      return cache;\n    },\n    set: function (value, expireDelay) {\n      setCookie(name, value, expireDelay);\n      cache = value;\n      cacheAccess();\n    }\n  };\n}\nexport function setCookie(name, value, expireDelay) {\n  var date = new Date();\n  date.setTime(date.getTime() + expireDelay);\n  var expires = \"expires=\" + date.toUTCString();\n  document.cookie = name + \"=\" + value + \";\" + expires + \";path=/\";\n}\nexport function getCookie(name) {\n  var matches = document.cookie.match(\"(^|;)\\\\s*\" + name + \"\\\\s*=\\\\s*([^;]+)\");\n  return matches ? matches.pop() : undefined;\n}\nexport function areCookiesAuthorized() {\n  if (document.cookie === undefined || document.cookie === null) {\n    return false;\n  }\n\n  try {\n    var testCookieName = 'dd_rum_test';\n    var testCookieValue = 'test';\n    setCookie(testCookieName, testCookieValue, 1000);\n    return getCookie(testCookieName) === testCookieValue;\n  } catch (error) {\n    console.error(error);\n    return false;\n  }\n}","map":{"version":3,"sources":["../src/cookie.ts"],"names":[],"mappings":"AAAA,OAAO,IAAM,mBAAmB,GAAG,IAA5B;AAOP,OAAM,SAAU,iBAAV,CAA4B,IAA5B,EAAwC;AAC5C,MAAI,OAAJ;AACA,MAAI,KAAJ;AACA,MAAI,QAAQ,GAAG,KAAf;;AAEA,MAAM,WAAW,GAAG,YAAA;AAClB,IAAA,QAAQ,GAAG,IAAX;AACA,IAAA,MAAM,CAAC,YAAP,CAAoB,OAApB;AACA,IAAA,OAAO,GAAG,MAAM,CAAC,UAAP,CAAkB,YAAA;AAC1B,MAAA,QAAQ,GAAG,KAAX;AACD,KAFS,EAEP,mBAFO,CAAV;AAGD,GAND;;AAQA,SAAO;AACL,IAAA,GAAG,EAAE,YAAA;AACH,UAAI,QAAJ,EAAc;AACZ,eAAO,KAAP;AACD;;AACD,MAAA,KAAK,GAAG,SAAS,CAAC,IAAD,CAAjB;AACA,MAAA,WAAW;AACX,aAAO,KAAP;AACD,KARI;AASL,IAAA,GAAG,EAAE,UAAC,KAAD,EAAgB,WAAhB,EAAmC;AACtC,MAAA,SAAS,CAAC,IAAD,EAAO,KAAP,EAAc,WAAd,CAAT;AACA,MAAA,KAAK,GAAG,KAAR;AACA,MAAA,WAAW;AACZ;AAbI,GAAP;AAeD;AAED,OAAM,SAAU,SAAV,CAAoB,IAApB,EAAkC,KAAlC,EAAiD,WAAjD,EAAoE;AACxE,MAAM,IAAI,GAAG,IAAI,IAAJ,EAAb;AACA,EAAA,IAAI,CAAC,OAAL,CAAa,IAAI,CAAC,OAAL,KAAiB,WAA9B;AACA,MAAM,OAAO,GAAG,aAAW,IAAI,CAAC,WAAL,EAA3B;AACA,EAAA,QAAQ,CAAC,MAAT,GAAqB,IAAI,GAAA,GAAJ,GAAQ,KAAR,GAAa,GAAb,GAAiB,OAAjB,GAAwB,SAA7C;AACD;AAED,OAAM,SAAU,SAAV,CAAoB,IAApB,EAAgC;AACpC,MAAM,OAAO,GAAG,QAAQ,CAAC,MAAT,CAAgB,KAAhB,CAAsB,cAAY,IAAZ,GAAgB,kBAAtC,CAAhB;AACA,SAAO,OAAO,GAAG,OAAO,CAAC,GAAR,EAAH,GAAmB,SAAjC;AACD;AAED,OAAM,SAAU,oBAAV,GAA8B;AAClC,MAAI,QAAQ,CAAC,MAAT,KAAoB,SAApB,IAAiC,QAAQ,CAAC,MAAT,KAAoB,IAAzD,EAA+D;AAC7D,WAAO,KAAP;AACD;;AACD,MAAI;AACF,QAAM,cAAc,GAAG,aAAvB;AACA,QAAM,eAAe,GAAG,MAAxB;AACA,IAAA,SAAS,CAAC,cAAD,EAAiB,eAAjB,EAAkC,IAAlC,CAAT;AACA,WAAO,SAAS,CAAC,cAAD,CAAT,KAA8B,eAArC;AACD,GALD,CAKE,OAAO,KAAP,EAAc;AACd,IAAA,OAAO,CAAC,KAAR,CAAc,KAAd;AACA,WAAO,KAAP;AACD;AACF","sourceRoot":"","sourcesContent":["export var COOKIE_ACCESS_DELAY = 1000;\nexport function cacheCookieAccess(name) {\n    var timeout;\n    var cache;\n    var hasCache = false;\n    var cacheAccess = function () {\n        hasCache = true;\n        window.clearTimeout(timeout);\n        timeout = window.setTimeout(function () {\n            hasCache = false;\n        }, COOKIE_ACCESS_DELAY);\n    };\n    return {\n        get: function () {\n            if (hasCache) {\n                return cache;\n            }\n            cache = getCookie(name);\n            cacheAccess();\n            return cache;\n        },\n        set: function (value, expireDelay) {\n            setCookie(name, value, expireDelay);\n            cache = value;\n            cacheAccess();\n        },\n    };\n}\nexport function setCookie(name, value, expireDelay) {\n    var date = new Date();\n    date.setTime(date.getTime() + expireDelay);\n    var expires = \"expires=\" + date.toUTCString();\n    document.cookie = name + \"=\" + value + \";\" + expires + \";path=/\";\n}\nexport function getCookie(name) {\n    var matches = document.cookie.match(\"(^|;)\\\\s*\" + name + \"\\\\s*=\\\\s*([^;]+)\");\n    return matches ? matches.pop() : undefined;\n}\nexport function areCookiesAuthorized() {\n    if (document.cookie === undefined || document.cookie === null) {\n        return false;\n    }\n    try {\n        var testCookieName = 'dd_rum_test';\n        var testCookieValue = 'test';\n        setCookie(testCookieName, testCookieValue, 1000);\n        return getCookie(testCookieName) === testCookieValue;\n    }\n    catch (error) {\n        console.error(error);\n        return false;\n    }\n}\n//# sourceMappingURL=cookie.js.map"]},"metadata":{},"sourceType":"module"}