{"ast":null,"code":"import { noop } from '@datadog/browser-core';\nimport { LifeCycleEventType } from './lifeCycle';\nexport function trackEventCounts(lifeCycle, callback) {\n  if (callback === void 0) {\n    callback = noop;\n  }\n\n  var eventCounts = {\n    errorCount: 0,\n    longTaskCount: 0,\n    resourceCount: 0,\n    userActionCount: 0\n  };\n  var subscriptions = [];\n  subscriptions.push(lifeCycle.subscribe(LifeCycleEventType.ERROR_COLLECTED, function () {\n    eventCounts.errorCount += 1;\n    callback(eventCounts);\n  }));\n  subscriptions.push(lifeCycle.subscribe(LifeCycleEventType.USER_ACTION_COLLECTED, function () {\n    eventCounts.userActionCount += 1;\n    callback(eventCounts);\n  }));\n  subscriptions.push(lifeCycle.subscribe(LifeCycleEventType.PERFORMANCE_ENTRY_COLLECTED, function (entry) {\n    if (entry.entryType === 'longtask') {\n      eventCounts.longTaskCount += 1;\n      callback(eventCounts);\n    }\n  }));\n  subscriptions.push(lifeCycle.subscribe(LifeCycleEventType.RESOURCE_ADDED_TO_BATCH, function () {\n    eventCounts.resourceCount += 1;\n    callback(eventCounts);\n  }));\n  return {\n    stop: function () {\n      subscriptions.forEach(function (s) {\n        return s.unsubscribe();\n      });\n    },\n    eventCounts: eventCounts\n  };\n}","map":{"version":3,"sources":["../src/trackEventCounts.ts"],"names":[],"mappings":"AAAA,SAAS,IAAT,QAAqB,uBAArB;AACA,SAAoB,kBAApB,QAA4D,aAA5D;AASA,OAAM,SAAU,gBAAV,CAA2B,SAA3B,EAAiD,QAAjD,EAAoG;AAAnD,MAAA,QAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,QAAA,GAAA,IAAA;AAAmD;;AACxG,MAAM,WAAW,GAAG;AAClB,IAAA,UAAU,EAAE,CADM;AAElB,IAAA,aAAa,EAAE,CAFG;AAGlB,IAAA,aAAa,EAAE,CAHG;AAIlB,IAAA,eAAe,EAAE;AAJC,GAApB;AAMA,MAAM,aAAa,GAAmB,EAAtC;AAEA,EAAA,aAAa,CAAC,IAAd,CACE,SAAS,CAAC,SAAV,CAAoB,kBAAkB,CAAC,eAAvC,EAAwD,YAAA;AACtD,IAAA,WAAW,CAAC,UAAZ,IAA0B,CAA1B;AACA,IAAA,QAAQ,CAAC,WAAD,CAAR;AACD,GAHD,CADF;AAMA,EAAA,aAAa,CAAC,IAAd,CACE,SAAS,CAAC,SAAV,CAAoB,kBAAkB,CAAC,qBAAvC,EAA8D,YAAA;AAC5D,IAAA,WAAW,CAAC,eAAZ,IAA+B,CAA/B;AACA,IAAA,QAAQ,CAAC,WAAD,CAAR;AACD,GAHD,CADF;AAMA,EAAA,aAAa,CAAC,IAAd,CACE,SAAS,CAAC,SAAV,CAAoB,kBAAkB,CAAC,2BAAvC,EAAoE,UAAC,KAAD,EAAM;AACxE,QAAI,KAAK,CAAC,SAAN,KAAoB,UAAxB,EAAoC;AAClC,MAAA,WAAW,CAAC,aAAZ,IAA6B,CAA7B;AACA,MAAA,QAAQ,CAAC,WAAD,CAAR;AACD;AACF,GALD,CADF;AAQA,EAAA,aAAa,CAAC,IAAd,CACE,SAAS,CAAC,SAAV,CAAoB,kBAAkB,CAAC,uBAAvC,EAAgE,YAAA;AAC9D,IAAA,WAAW,CAAC,aAAZ,IAA6B,CAA7B;AACA,IAAA,QAAQ,CAAC,WAAD,CAAR;AACD,GAHD,CADF;AAMA,SAAO;AACL,IAAA,IAAI,EAAA,YAAA;AACF,MAAA,aAAa,CAAC,OAAd,CAAsB,UAAC,CAAD,EAAE;AAAK,eAAA,CAAC,CAAD,WAAA,EAAA;AAAe,OAA5C;AACD,KAHI;AAIL,IAAA,WAAW,EAAA;AAJN,GAAP;AAMD","sourceRoot":"","sourcesContent":["import { noop } from '@datadog/browser-core';\nimport { LifeCycleEventType } from './lifeCycle';\nexport function trackEventCounts(lifeCycle, callback) {\n    if (callback === void 0) { callback = noop; }\n    var eventCounts = {\n        errorCount: 0,\n        longTaskCount: 0,\n        resourceCount: 0,\n        userActionCount: 0,\n    };\n    var subscriptions = [];\n    subscriptions.push(lifeCycle.subscribe(LifeCycleEventType.ERROR_COLLECTED, function () {\n        eventCounts.errorCount += 1;\n        callback(eventCounts);\n    }));\n    subscriptions.push(lifeCycle.subscribe(LifeCycleEventType.USER_ACTION_COLLECTED, function () {\n        eventCounts.userActionCount += 1;\n        callback(eventCounts);\n    }));\n    subscriptions.push(lifeCycle.subscribe(LifeCycleEventType.PERFORMANCE_ENTRY_COLLECTED, function (entry) {\n        if (entry.entryType === 'longtask') {\n            eventCounts.longTaskCount += 1;\n            callback(eventCounts);\n        }\n    }));\n    subscriptions.push(lifeCycle.subscribe(LifeCycleEventType.RESOURCE_ADDED_TO_BATCH, function () {\n        eventCounts.resourceCount += 1;\n        callback(eventCounts);\n    }));\n    return {\n        stop: function () {\n            subscriptions.forEach(function (s) { return s.unsubscribe(); });\n        },\n        eventCounts: eventCounts,\n    };\n}\n//# sourceMappingURL=trackEventCounts.js.map"]},"metadata":{},"sourceType":"module"}